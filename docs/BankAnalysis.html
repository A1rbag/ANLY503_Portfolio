<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Kuiyu Zhu" />

<meta name="date" content="2020-10-23" />

<title>Bank Analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.52.2/plotly-latest.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">DataViz Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="A1.html">Hand Drawing</a>
</li>
<li>
  <a href="BankAnalysis.html">Bank Analysis</a>
</li>
<li>
  <a href="geospatial.html">Geospatial</a>
</li>
<li>
  <a href="networks.html">Network</a>
</li>
<li>
  <a href="503p.html">Final Project</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Bank Analysis</h1>
<h4 class="author">Kuiyu Zhu</h4>
<h4 class="date">10/23/2020</h4>

</div>


<div id="task1" class="section level3">
<h3>Task1</h3>
<ol style="list-style-type: decimal">
<li>Whether an account has a credit card or not<br />
</li>
<li>Whether an account has a loan or not<br />
</li>
<li>The average balance for the account<br />
Embed the 3 features mentioned in ONE graph.</li>
</ol>
<pre class="r"><code># set up python env
library(reticulate)
use_python(&#39;/Library/Frameworks/Python.framework/Versions/3.7/bin/python3&#39;)</code></pre>
<pre class="python"><code># import libraries
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
sns.set_style(&quot;dark&quot;)
import warnings
warnings.filterwarnings(&quot;ignore&quot;)</code></pre>
<pre class="python"><code># load in data
acct = pd.read_csv(&#39;data/accounts_analytical.csv&#39;)
# create average_balance column
acct[&#39;aver_balance&#39;] = acct[&#39;min_balance&#39;]/2 + acct[&#39;max_balance&#39;]/2</code></pre>
<pre class="python"><code># average balance for accounts which have credit cards
b1 = np.mean(acct[&#39;aver_balance&#39;][acct[&#39;credit_cards&#39;] &gt;=1])
# average balance for accounts which do not have credit cards
acct[&#39;credit_cards&#39;] = acct[&#39;credit_cards&#39;].fillna(0)
b2 = np.mean(acct[&#39;aver_balance&#39;][acct[&#39;credit_cards&#39;] == 0])
acct[&#39;loan_amount&#39;] = acct[&#39;loan_amount&#39;].fillna(0)
# average balance for accounts which have a loan
b3 = np.mean(acct[&#39;aver_balance&#39;][acct[&#39;loan_amount&#39;] !=0])
# average balance for accounts which do not have a loan
b4 = np.mean(acct[&#39;aver_balance&#39;][acct[&#39;loan_amount&#39;] ==0])</code></pre>
<pre class="python"><code>x = [&#39;have cc&#39;, &#39;have no cc&#39;, &#39;have loan&#39;, &#39;have no loan&#39;]
y = [b1, b2, b3, b4]

fig, ax = plt.subplots()
width = 0.5 # the width of the bars 
ind = np.arange(len(y))  # the x locations for the groups
ax.barh(ind, y, width, color=&quot;green&quot;)</code></pre>
<pre><code>## &lt;BarContainer object of 4 artists&gt;</code></pre>
<pre class="python"><code>ax.set_yticks(ind+width/6)</code></pre>
<pre><code>## [&lt;matplotlib.axis.YTick object at 0x7fafc1e20190&gt;, &lt;matplotlib.axis.YTick object at 0x7fafc1e0ecd0&gt;, &lt;matplotlib.axis.YTick object at 0x7fafc1df6cd0&gt;, &lt;matplotlib.axis.YTick object at 0x7fafc1f57550&gt;]</code></pre>
<pre class="python"><code>ax.set_yticklabels(x, minor=False)</code></pre>
<pre><code>## [Text(0, 0.08333333333333333, &#39;have cc&#39;), Text(0, 1.0833333333333333, &#39;have no cc&#39;), Text(0, 2.0833333333333335, &#39;have loan&#39;), Text(0, 3.0833333333333335, &#39;have no loan&#39;)]</code></pre>
<pre class="python"><code>plt.title(&#39;Average Balance Bar Plot&#39;)
for i, v in enumerate(y):
    ax.text(v + 2.5, i + .03, str(round(v,2)), color=&#39;black&#39;, fontweight=&#39;bold&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="task2" class="section level3">
<h3>Task2</h3>
<p>What is the distribution of all loans and what are their characteristics?</p>
<pre class="python"><code># load in data
acct = pd.read_csv(&#39;data/accounts_analytical.csv&#39;)
# create loan dataset
loan = acct[[&#39;loan_date&#39;, &#39;loan_amount&#39;, &#39;loan_payment&#39;, &#39;loan_term&#39;, &#39;loan_status&#39;, &#39;loan_default&#39;]]
loan = loan.dropna()</code></pre>
<pre class="python"><code># plot distrubution of loan amount
fig = plt.figure(figsize=(8,6))
g = sns.distplot(loan[&#39;loan_amount&#39;], bins=20, kde=False)
plt.title(&#39;Distribution of Loan Amount&#39;)
plt.xlabel(&#39;Loan Amount&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-7-1.png" width="768" /></p>
<pre class="python"><code># plot distribution of loan payment
fig = plt.figure(figsize=(8,6))
g = sns.distplot(loan[&#39;loan_payment&#39;], bins=20, kde=False)
plt.title(&#39;Distribution of Loan Payment&#39;)
plt.xlabel(&#39;Loan Payment&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-8-1.png" width="768" /></p>
<pre class="python"><code># plot loan term
fig = plt.figure(figsize=(8,6))
g = sns.countplot(loan[&#39;loan_term&#39;])
g.set_title(&#39;Count of Loan Term&#39;)
for p in g.patches:
    g.annotate(str(format(int(p.get_height()), &#39;,d&#39;)), (p.get_x()+0.3, p.get_height()*1.01))
plt.xlabel(&#39;Loan Term&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-9-1.png" width="768" /></p>
<pre class="python"><code># plot loan status
fig = plt.figure(figsize=(8,6))
g = sns.countplot(loan[&#39;loan_status&#39;])
g.set_title(&#39;Count of Loan Status&#39;)
for p in g.patches:
    g.annotate(str(format(int(p.get_height()), &#39;,d&#39;)), (p.get_x()+0.37, p.get_height()*1.01))
plt.xlabel(&#39;Loan Status&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-10-1.png" width="768" /></p>
<pre class="python"><code># plot loan default
fig = plt.figure(figsize=(8,6))
g = sns.countplot(loan[&#39;loan_default&#39;])
g.set_title(&#39;Count of Loan Default&#39;)
for p in g.patches:
    g.annotate(str(format(int(p.get_height()), &#39;,d&#39;)), (p.get_x()+0.37, p.get_height()*1.01))
plt.xlabel(&#39;Loan Default&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-11-1.png" width="768" /></p>
<pre class="python"><code># plot loan term based on loan status
fig = plt.figure(figsize=(8,6))
g = sns.countplot(x = &#39;loan_term&#39;, hue=&#39;loan_status&#39;, data=loan)
g.set_title(&#39;Count of Loan Term Based on Loan Status&#39;)
for p in g.patches:
    g.annotate(str(format(int(p.get_height()), &#39;,d&#39;)), (p.get_x()+0.12, p.get_height()*1.01))
plt.xlabel(&#39;Loan Term&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-12-1.png" width="768" /></p>
<pre class="python"><code># plot loan term based on whether it is defaulted
fig = plt.figure(figsize=(8,6))
g = sns.countplot(x = &#39;loan_term&#39;, hue=&#39;loan_default&#39;, data=loan)
g.set_title(&#39;Count of Loan Term if it is defaulted&#39;)
for p in g.patches:
    g.annotate(str(format(int(p.get_height()), &#39;,d&#39;)), (p.get_x()+0.12, p.get_height()*1.01))
plt.xlabel(&#39;Loan Term&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-13-1.png" width="768" /></p>
</div>
<div id="task3" class="section level3">
<h3>Task3</h3>
<p>Is there a relationship between a good or bad loan and the time an account is opened?<br />
Is there a relationship between a good or bad loan and the time the loan is created?<br />
Is there a specific set of accounts that seem to be at higher or lower risk of defaulting?</p>
<pre class="python"><code># load in data
acct = pd.read_csv(&#39;data/accounts_analytical.csv&#39;)
# create loan dataset
loan = acct[[&#39;acct_creation_date&#39;, &#39;loan_date&#39;, &#39;loan_amount&#39;, &#39;loan_payment&#39;, &#39;loan_term&#39;, &#39;loan_status&#39;, &#39;loan_default&#39;]]
loan = loan.dropna()</code></pre>
<pre class="python"><code># split &quot;acct_creation_date&quot;
loan[&#39;acct_year&#39;] = pd.DatetimeIndex(loan[&#39;acct_creation_date&#39;]).year
loan[&#39;acct_month&#39;] = pd.DatetimeIndex(loan[&#39;acct_creation_date&#39;]).month
loan[&#39;acct_day&#39;] = pd.DatetimeIndex(loan[&#39;acct_creation_date&#39;]).day
# drop &quot;acct_creation_date&quot;
del loan[&#39;acct_creation_date&#39;]
# split &quot;loan_date&quot;
loan[&#39;loan_year&#39;] = pd.DatetimeIndex(loan[&#39;loan_date&#39;]).year
loan[&#39;loan_month&#39;] = pd.DatetimeIndex(loan[&#39;loan_date&#39;]).month
loan[&#39;loan_day&#39;] = pd.DatetimeIndex(loan[&#39;loan_date&#39;]).day
# drop &quot;loan_date&quot;
del loan[&#39;loan_date&#39;]</code></pre>
<pre class="python"><code># Is there a relationship between a good or bad loan and the time an account is opened? 
# define whether a loan is good/bad - status/default
loan1 = loan[[&#39;loan_status&#39;, &#39;loan_default&#39;, &#39;acct_year&#39;, &#39;acct_month&#39;, &#39;acct_day&#39;, &#39;loan_year&#39;, &#39;loan_month&#39;, &#39;loan_day&#39;]]
# encoding loan_status, loan_default
loan1[&#39;loan_status&#39;] = loan1[&#39;loan_status&#39;].map({&#39;current&#39;: 0, &#39;expired&#39;: 1})
loan1[&#39;loan_default&#39;] = loan1[&#39;loan_default&#39;].map({False: 0, True: 1})
# heatmap of correlation
mask = np.triu(np.ones_like(loan1.corr(), dtype=bool))
heatmap = sns.heatmap(loan1.corr(), mask = mask, vmin=-1, vmax=1, annot=True, cmap=&#39;BrBG&#39;)
heatmap.set_title(&#39;Correlation Heatmap&#39;, fontdict={&#39;fontsize&#39;:12}, pad=12)
heatmap</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-16-1.png" width="768" /></p>
<p>It seems that there are relationships between loan_status and loan_year &amp; acct_year.<br />
It seems that there is no any strong relationship between loan_default and others.<br />
Lets explore the relationships between loan_status and loan_year &amp; acct_year.</p>
<pre class="python"><code>loan1[&#39;loan_status&#39;] = loan1[&#39;loan_status&#39;].map({0:&#39;current&#39;, 1:&#39;expired&#39;})
# loan_status &amp; loan_year
fig = plt.figure(figsize=(8,6))
g = sns.countplot(x = &#39;loan_status&#39;, hue=&#39;loan_year&#39;, data=loan1)
g.set_title(&#39;Count of Loan Status Based on Year when the Loan Created &#39;)
plt.xlabel(&#39;Loan Status&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-17-1.png" width="768" /></p>
<p>Conclusion: Loans Created in 1994 are most likely to be expired, and loans created in 1998 are less likely to be expired.</p>
<pre class="python"><code># loan_status &amp; acct_year
fig = plt.figure(figsize=(8,6))
g = sns.countplot(x = &#39;loan_status&#39;, hue=&#39;acct_year&#39;, data=loan1)
g.set_title(&#39;Count of Loan Status Based on Year when the Account Opened&#39;)
plt.xlabel(&#39;Loan Status&#39;)
plt.ylabel(&#39;Count&#39;)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-18-1.png" width="768" /></p>
<p>Conclusion: Loans, associated with the account opened in 1993 are most likely to be expired, and loans, associated with the account opened in 1997 are less likely to be expired.</p>
<pre class="r"><code>acct = read.csv(&#39;data/accounts_analytical.csv&#39;, header = TRUE)
# Omit rows containing specific column (loan_default) of NA
completeFun &lt;- function(data, desiredCols) {
  completeVec &lt;- complete.cases(data[, desiredCols])
  return(data[completeVec, ])
}
loan2 &lt;- completeFun(acct, &#39;loan_default&#39;)
# export new data
write.csv(loan2, &#39;data/loan2.csv&#39;)</code></pre>
<pre class="python"><code># ignore some columns (features)
loan2 = pd.read_csv(&#39;data/loan2.csv&#39;)
loan2 = loan2[[&#39;statement_frequency&#39;, &#39;num_customers&#39;, &#39;credit_cards&#39;, &#39;max_withdrawal&#39;, &#39;min_withdrawal&#39;,
&#39;max_balance&#39;, &#39;min_balance&#39;, &#39;pmt_order_ct&#39;, &#39;pmt_order_avg_amt&#39;, &#39;gender&#39;, &#39;birth_date&#39;, &#39;loan_default&#39;]]
loan2.info()</code></pre>
<pre><code>## &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
## RangeIndex: 682 entries, 0 to 681
## Data columns (total 12 columns):
##  #   Column               Non-Null Count  Dtype  
## ---  ------               --------------  -----  
##  0   statement_frequency  682 non-null    object 
##  1   num_customers        682 non-null    int64  
##  2   credit_cards         39 non-null     float64
##  3   max_withdrawal       682 non-null    int64  
##  4   min_withdrawal       682 non-null    int64  
##  5   max_balance          682 non-null    int64  
##  6   min_balance          682 non-null    int64  
##  7   pmt_order_ct         682 non-null    int64  
##  8   pmt_order_avg_amt    682 non-null    float64
##  9   gender               622 non-null    object 
##  10  birth_date           622 non-null    object 
##  11  loan_default         682 non-null    bool   
## dtypes: bool(1), float64(2), int64(6), object(3)
## memory usage: 59.4+ KB</code></pre>
<pre class="python"><code># data cleaning
# fill NA with 0
loan2 = loan2.fillna(0)
# encoding
loan2[&#39;statement_frequency&#39;] = loan2[&#39;statement_frequency&#39;].map({&#39;monthly&#39;: 0, &#39;weekly&#39;: 1, &#39;after every transaction&#39;: 2})
loan2[&#39;gender&#39;] = loan2[&#39;gender&#39;].map({&#39;F&#39;: 0, &#39;M&#39;: 1})
# transfer birth_date to age
loan2[&#39;birth_year&#39;] = pd.DatetimeIndex(loan2[&#39;birth_date&#39;]).year
loan2[&#39;age&#39;] = loan2[&#39;birth_year&#39;].map(lambda x: 2020 - x)
del loan2[&#39;birth_year&#39;]
del loan2[&#39;birth_date&#39;]
# bool target to int
loan2[&#39;loan_default&#39;] = loan2[&#39;loan_default&#39;].map({False: 0, True: 1})</code></pre>
<pre class="python"><code># heatmap of correlation
fig = plt.figure(figsize=(10,10))
mask = np.triu(np.ones_like(loan2.corr(), dtype=bool))
heatmap = sns.heatmap(loan2.corr(), mask = mask, vmin=-1, vmax=1, annot=True, cmap=&#39;BrBG&#39;)
heatmap.set_title(&#39;Correlation Heatmap&#39;, fontdict={&#39;fontsize&#39;:12}, pad=12)
heatmap</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-22-1.png" width="960" /></p>
<p>It seems that there are strong relationships between loan_default and min_balance &amp; min_withdrawal.</p>
<pre class="python"><code>loan2[&#39;loan_default&#39;] = loan2[&#39;loan_default&#39;].map({0: False, 1:True})
# plot loan_default with min_balance
fig = plt.figure(figsize=(10,10))
g = sns.catplot(x=&quot;loan_default&quot;, y=&quot;min_balance&quot;, data=loan2)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-23-1.png" width="480" /></p>
<p>The result is quite straight forward. If the minimum balance of an account is less than 0, its loan will definitely be default.</p>
<pre class="python"><code># plot loan_default with min_withdrawal
fig = plt.figure(figsize=(10,10))
g = sns.catplot(x=&quot;loan_default&quot;, y=&quot;min_withdrawal&quot;, data=loan2)
plt.show()</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-24-1.png" width="480" /></p>
<p>The result is also very clear. If the minimum withdrawal is approaching to 0, then the loan is likely to be defaulted.</p>
</div>
<div id="task4" class="section level3">
<h3>Task4</h3>
<p>For the account with the highest number of transacations, make a time series line plot for the behavior of the account over time, including all debits and credits, the different methods, and the different categories.</p>
<pre class="python"><code># load in data
tran = pd.read_csv(&#39;data/transactions.csv&#39;)
tran.info()</code></pre>
<pre><code>## &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
## RangeIndex: 1056320 entries, 0 to 1056319
## Data columns (total 10 columns):
##  #   Column      Non-Null Count    Dtype  
## ---  ------      --------------    -----  
##  0   id          1056320 non-null  int64  
##  1   account_id  1056320 non-null  int64  
##  2   date        1056320 non-null  object 
##  3   type        1056320 non-null  object 
##  4   amount      1056320 non-null  int64  
##  5   balance     1056320 non-null  int64  
##  6   bank        273508 non-null   object 
##  7   account     295389 non-null   float64
##  8   method      873206 non-null   object 
##  9   category    521006 non-null   object 
## dtypes: float64(1), int64(4), object(5)
## memory usage: 80.6+ MB</code></pre>
<pre class="python"><code>data = tran[tran[&#39;account_id&#39;] == 8261]
data = data.drop([&#39;id&#39;, &#39;account_id&#39;, &#39;bank&#39;, &#39;account&#39;,&#39;amount&#39; ], axis=1)
#data = data.set_index(&#39;date&#39;)
tran = data
data = data.dropna()</code></pre>
<pre class="r"><code>library(plotly)
tran = py$tran
data = py$data

# plot
fig1 &lt;- plot_ly(tran, x = ~date, y = ~balance, color= ~type, type = &#39;scatter&#39;, mode = &#39;lines&#39;)

fig1 &lt;- fig1 %&gt;%  layout(title = &#39;Time Series Plot of Balance of Diff Types&#39;, 
                       yaxis = list(title = &#39;Balance&#39;), 
                       xaxis = list(title = &#39;date&#39;))
                       
fig1</code></pre>
<div id="htmlwidget-731ad0e6f3acc9a9e7b0" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-731ad0e6f3acc9a9e7b0">{"x":{"visdat":{"1273832cfc986":["function () ","plotlyVisDat"]},"cur_data":"1273832cfc986","attrs":{"1273832cfc986":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Time Series Plot of Balance of Diff Types","yaxis":{"domain":[0,1],"automargin":true,"title":"Balance"},"xaxis":{"domain":[0,1],"automargin":true,"title":"date","type":"category","categoryorder":"array","categoryarray":["1993-05-12","1993-05-14","1993-05-31","1993-06-11","1993-06-14","1993-06-30","1993-07-11","1993-07-14","1993-07-31","1993-08-10","1993-08-14","1993-08-31","1993-09-09","1993-09-14","1993-09-30","1993-10-05","1993-10-09","1993-10-10","1993-10-12","1993-10-13","1993-10-14","1993-10-16","1993-10-31","1993-11-05","1993-11-08","1993-11-10","1993-11-12","1993-11-13","1993-11-14","1993-11-17","1993-11-30","1993-12-05","1993-12-08","1993-12-10","1993-12-12","1993-12-13","1993-12-14","1993-12-23","1993-12-31","1994-01-05","1994-01-07","1994-01-09","1994-01-10","1994-01-12","1994-01-13","1994-01-14","1994-01-29","1994-01-31","1994-02-05","1994-02-06","1994-02-10","1994-02-12","1994-02-13","1994-02-14","1994-02-28","1994-03-05","1994-03-08","1994-03-10","1994-03-12","1994-03-13","1994-03-14","1994-03-31","1994-04-05","1994-04-07","1994-04-10","1994-04-12","1994-04-13","1994-04-14","1994-04-23","1994-04-30","1994-05-05","1994-05-07","1994-05-10","1994-05-12","1994-05-13","1994-05-14","1994-05-31","1994-06-05","1994-06-06","1994-06-10","1994-06-12","1994-06-13","1994-06-14","1994-06-30","1994-07-05","1994-07-06","1994-07-10","1994-07-12","1994-07-13","1994-07-14","1994-07-31","1994-08-05","1994-08-10","1994-08-11","1994-08-12","1994-08-13","1994-08-14","1994-08-31","1994-09-04","1994-09-05","1994-09-10","1994-09-12","1994-09-13","1994-09-14","1994-09-28","1994-09-30","1994-10-04","1994-10-05","1994-10-10","1994-10-12","1994-10-13","1994-10-14","1994-10-31","1994-11-03","1994-11-05","1994-11-10","1994-11-12","1994-11-13","1994-11-14","1994-11-30","1994-12-03","1994-12-05","1994-12-10","1994-12-12","1994-12-13","1994-12-14","1994-12-31","1995-01-02","1995-01-05","1995-01-10","1995-01-12","1995-01-13","1995-01-14","1995-01-21","1995-01-24","1995-01-31","1995-02-01","1995-02-05","1995-02-10","1995-02-12","1995-02-13","1995-02-14","1995-02-28","1995-03-03","1995-03-05","1995-03-10","1995-03-12","1995-03-13","1995-03-14","1995-03-31","1995-04-02","1995-04-05","1995-04-10","1995-04-12","1995-04-13","1995-04-14","1995-04-30","1995-05-02","1995-05-05","1995-05-10","1995-05-12","1995-05-13","1995-05-14","1995-05-31","1995-06-01","1995-06-05","1995-06-10","1995-06-12","1995-06-13","1995-06-14","1995-06-22","1995-06-25","1995-06-30","1995-07-01","1995-07-05","1995-07-10","1995-07-12","1995-07-13","1995-07-14","1995-07-19","1995-07-31","1995-08-05","1995-08-10","1995-08-12","1995-08-13","1995-08-14","1995-08-18","1995-08-30","1995-08-31","1995-09-05","1995-09-10","1995-09-12","1995-09-13","1995-09-14","1995-09-29","1995-09-30","1995-10-05","1995-10-10","1995-10-12","1995-10-13","1995-10-14","1995-10-21","1995-10-29","1995-10-31","1995-11-05","1995-11-10","1995-11-11","1995-11-12","1995-11-13","1995-11-14","1995-11-28","1995-11-30","1995-12-02","1995-12-05","1995-12-10","1995-12-12","1995-12-13","1995-12-14","1995-12-28","1995-12-31","1996-01-05","1996-01-07","1996-01-10","1996-01-12","1996-01-13","1996-01-14","1996-01-15","1996-01-17","1996-01-27","1996-01-31","1996-02-05","1996-02-10","1996-02-12","1996-02-13","1996-02-14","1996-02-24","1996-02-26","1996-02-29","1996-03-05","1996-03-10","1996-03-12","1996-03-13","1996-03-14","1996-03-27","1996-03-31","1996-04-05","1996-04-08","1996-04-10","1996-04-12","1996-04-13","1996-04-14","1996-04-17","1996-04-26","1996-04-30","1996-05-05","1996-05-10","1996-05-12","1996-05-13","1996-05-14","1996-05-17","1996-05-26","1996-05-31","1996-06-05","1996-06-10","1996-06-12","1996-06-13","1996-06-14","1996-06-17","1996-06-25","1996-06-30","1996-07-05","1996-07-08","1996-07-10","1996-07-12","1996-07-13","1996-07-14","1996-07-17","1996-07-25","1996-07-31","1996-08-05","1996-08-10","1996-08-12","1996-08-13","1996-08-14","1996-08-21","1996-08-24","1996-08-31","1996-09-05","1996-09-10","1996-09-12","1996-09-13","1996-09-14","1996-09-23","1996-09-30","1996-10-05","1996-10-08","1996-10-10","1996-10-12","1996-10-13","1996-10-14","1996-10-23","1996-10-31","1996-11-05","1996-11-10","1996-11-11","1996-11-12","1996-11-13","1996-11-14","1996-11-22","1996-11-30","1996-12-05","1996-12-10","1996-12-12","1996-12-13","1996-12-14","1996-12-22","1996-12-31","1997-01-05","1997-01-08","1997-01-10","1997-01-12","1997-01-13","1997-01-14","1997-01-21","1997-01-31","1997-02-05","1997-02-10","1997-02-12","1997-02-13","1997-02-14","1997-02-20","1997-02-28","1997-03-02","1997-03-05","1997-03-10","1997-03-12","1997-03-13","1997-03-14","1997-03-31","1997-04-05","1997-04-10","1997-04-12","1997-04-13","1997-04-14","1997-04-17","1997-04-21","1997-04-30","1997-05-05","1997-05-09","1997-05-10","1997-05-12","1997-05-13","1997-05-14","1997-05-31","1997-06-05","1997-06-10","1997-06-12","1997-06-13","1997-06-14","1997-06-20","1997-06-21","1997-06-30","1997-07-05","1997-07-10","1997-07-12","1997-07-13","1997-07-14","1997-07-20","1997-07-31","1997-08-05","1997-08-10","1997-08-12","1997-08-13","1997-08-14","1997-08-17","1997-08-19","1997-08-31","1997-09-05","1997-09-10","1997-09-12","1997-09-13","1997-09-14","1997-09-18","1997-09-21","1997-09-30","1997-10-02","1997-10-05","1997-10-10","1997-10-12","1997-10-13","1997-10-14","1997-10-18","1997-10-31","1997-11-05","1997-11-10","1997-11-12","1997-11-13","1997-11-14","1997-11-17","1997-11-30","1997-12-05","1997-12-10","1997-12-12","1997-12-13","1997-12-14","1997-12-17","1997-12-19","1997-12-31","1998-01-02","1998-01-05","1998-01-10","1998-01-12","1998-01-13","1998-01-14","1998-01-28","1998-01-31","1998-02-05","1998-02-10","1998-02-12","1998-02-13","1998-02-14","1998-02-15","1998-02-28","1998-03-05","1998-03-10","1998-03-12","1998-03-13","1998-03-14","1998-03-20","1998-03-26","1998-03-31","1998-04-05","1998-04-10","1998-04-12","1998-04-13","1998-04-14","1998-04-15","1998-04-16","1998-04-30","1998-05-02","1998-05-05","1998-05-10","1998-05-12","1998-05-13","1998-05-14","1998-05-16","1998-05-31","1998-06-05","1998-06-10","1998-06-12","1998-06-13","1998-06-14","1998-06-15","1998-06-30","1998-07-05","1998-07-07","1998-07-10","1998-07-12","1998-07-13","1998-07-14","1998-07-15","1998-07-31","1998-08-05","1998-08-10","1998-08-12","1998-08-13","1998-08-14","1998-08-21","1998-08-31","1998-09-05","1998-09-10","1998-09-12","1998-09-13","1998-09-14","1998-09-30","1998-10-02","1998-10-05","1998-10-10","1998-10-12","1998-10-13","1998-10-14","1998-10-31","1998-11-05","1998-11-10","1998-11-12","1998-11-13","1998-11-14","1998-11-19","1998-11-30","1998-12-02","1998-12-05","1998-12-10","1998-12-12","1998-12-13","1998-12-14","1998-12-23","1998-12-31"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["1993-05-12","1993-05-14","1993-06-14","1993-07-14","1993-08-14","1993-09-14","1993-10-14","1993-11-14","1993-12-14","1994-01-14","1994-02-14","1994-03-14","1994-04-14","1994-05-14","1994-06-14","1994-07-14","1994-08-14","1994-09-14","1994-10-14","1994-11-14","1994-12-14","1995-01-14","1995-02-14","1995-03-14","1995-04-14","1995-05-14","1995-06-14","1995-07-14","1995-08-14","1995-09-14","1995-10-14","1995-11-14","1995-12-14","1996-01-14","1996-02-14","1996-03-14","1996-04-14","1996-05-14","1996-06-14","1996-07-14","1996-08-14","1996-09-14","1996-10-14","1996-11-14","1996-12-14","1997-01-14","1997-02-14","1997-03-14","1997-04-14","1997-05-14","1997-06-14","1997-07-14","1997-08-14","1997-09-14","1997-10-14","1997-11-14","1997-12-14","1998-01-14","1998-02-14","1998-03-14","1998-04-14","1998-05-14","1998-06-14","1998-07-14","1998-08-14","1998-09-14","1998-10-14","1998-11-14","1998-12-14","1993-06-11","1993-12-08","1994-05-07","1994-10-04","1993-05-31","1993-06-30","1993-07-31","1993-08-31","1993-09-30","1993-10-31","1993-11-30","1993-12-31","1994-01-31","1994-02-28","1994-03-31","1994-04-30","1994-05-31","1994-06-30","1994-07-31","1994-08-31","1994-09-30","1994-10-31","1994-11-30","1994-12-31","1995-01-31","1995-02-28","1995-03-31","1995-04-30","1995-05-31","1995-06-30","1995-07-31","1995-08-31","1995-09-30","1995-10-31","1995-11-30","1995-12-31","1996-01-31","1996-02-29","1996-03-31","1996-04-30","1996-05-31","1996-06-30","1996-07-31","1996-08-31","1996-09-30","1996-10-31","1996-11-30","1996-12-31","1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30","1998-12-31","1993-05-31","1993-06-30","1993-07-31","1993-08-31","1993-09-30","1993-10-31","1993-11-30","1993-12-31","1994-01-31","1994-02-28","1994-03-31","1994-04-30","1994-05-31","1994-06-30","1994-07-31","1994-08-31","1994-09-30","1994-10-31","1994-11-30","1994-12-31","1995-01-31","1995-02-28","1995-03-31","1995-04-30","1995-05-31","1995-06-30","1995-07-31","1995-08-31","1995-09-30","1995-10-31","1995-11-30","1995-12-31","1996-01-31","1996-02-29","1996-03-31","1996-04-30","1996-05-31","1996-06-30","1996-07-31","1996-08-31","1996-09-30","1996-10-31","1996-11-30","1996-12-31","1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30","1998-12-31"],"y":[500,22459,57603,64666,65429,65807,60671,46335,49920,38930,45463,47420,48674,42075,58362,54500,50957,38482,40708,49113,58551,54373,46873,47934,50009,53272,56921,40778,45739,38538,47169,49021,60209,55852,40002,36997,41907,40500,51356,33289,35426,32780,32316,32956,46786,42293,36169,31526,48486,36501,64460,44308,41917,38280,34726,35954,47164,33899,44165,37822,48404,37081,47083,41524,40558,32813,47075,47442,68181,24665,30766,28500,27546,22565,57779,65070,65848,66079,40064,30497,39282,35015,45621,47726,25427,42336,58753,54910,51146,22761,40839,49283,58925,39249,47030,48101,50325,42395,29931,33491,33690,30362,35207,38822,42686,26874,24090,29099,23692,23570,20465,18561,19372,18348,19182,22599,29287,23488,19044,31602,22594,36598,31299,25109,21395,22251,22946,19316,20691,30378,21014,31509,23690,23344,28917,23696,19605,32890,47334,43893,63161,22510,57907,64813,65578,66224,40188,30594,39131,34872,45773,47549,25273,42196,58558,54705,51335,22629,40965,49424,58725,39425,47187,48262,50152,42210,29774,33376,33790,30248,35314,38669,42844,26994,23984,28998,23598,23474,20581,18619,19298,18409,19248,22527,29385,23561,19118,31678,22489,36674,31400,25008,21473,22319,22882,19378,20628,30458,20940,31596,23773,23397,28839,23750,19532,32967,47202,43994,62967],"mode":"lines","type":"scatter","name":"credit","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1993-10-12","1993-11-12","1993-12-12","1994-01-12","1994-02-12","1994-03-12","1994-04-12","1994-05-12","1994-06-12","1994-07-12","1994-08-12","1994-09-12","1994-10-12","1994-11-12","1994-12-12","1995-01-12","1995-02-12","1995-03-12","1995-04-12","1995-05-12","1995-06-12","1995-07-12","1995-08-12","1995-09-12","1995-10-21","1995-11-11","1995-12-02","1996-01-07","1996-02-12","1996-03-10","1996-04-08","1996-05-17","1996-06-17","1996-07-08","1996-08-21","1996-09-05","1996-10-08","1996-11-11","1996-12-12","1997-01-08","1997-02-12","1997-03-02","1997-04-17","1997-05-09","1997-06-21","1997-07-13","1997-08-17","1997-09-21","1997-10-02","1997-11-13","1997-12-19","1998-01-02","1998-02-10","1998-03-20","1998-04-15","1998-05-02","1998-06-12","1998-07-07","1998-08-21","1998-09-13","1998-10-02","1998-11-19","1998-12-02","1993-10-12","1993-11-12","1993-12-12","1994-01-12","1994-02-12","1994-03-12","1994-04-12","1994-05-12","1994-06-12","1994-07-12","1994-08-12","1994-09-12","1994-10-12","1994-11-12","1994-12-12","1995-01-12","1995-02-12","1995-03-12","1995-04-12","1995-05-12","1995-06-12","1995-07-12","1995-08-12","1995-09-12","1995-10-12","1995-11-12","1995-12-12","1996-01-12","1996-02-12","1996-03-12","1996-04-12","1996-05-12","1996-06-12","1996-07-12","1996-08-12","1996-09-12","1996-10-12","1996-11-12","1996-12-12","1997-01-12","1997-02-12","1997-03-12","1997-04-12","1997-05-12","1997-06-12","1997-07-12","1997-08-12","1997-09-12","1997-10-12","1997-11-12","1997-12-12","1998-01-12","1998-02-12","1998-03-12","1998-04-12","1998-05-12","1998-06-12","1998-07-12","1998-08-12","1998-09-12","1998-10-12","1998-11-12","1998-12-12","1993-10-05","1993-11-05","1993-12-05","1994-01-05","1994-02-05","1994-03-05","1994-04-05","1994-05-05","1994-06-05","1994-07-05","1994-08-05","1994-09-05","1994-10-05","1994-11-05","1994-12-05","1995-01-05","1995-02-05","1995-03-05","1995-04-05","1995-05-05","1995-06-05","1995-07-05","1995-08-05","1995-09-05","1995-10-05","1995-11-05","1995-12-05","1996-01-05","1996-02-05","1996-03-05","1996-04-05","1996-05-05","1996-06-05","1996-07-05","1996-08-05","1996-09-05","1996-10-05","1996-11-05","1996-12-05","1997-01-05","1997-02-05","1997-03-05","1997-04-05","1997-05-05","1997-06-05","1997-07-05","1997-08-05","1997-09-05","1997-10-05","1997-11-05","1997-12-05","1998-01-05","1998-02-05","1998-03-05","1998-04-05","1998-05-05","1998-06-05","1998-07-05","1998-08-05","1998-09-05","1998-10-05","1998-11-05","1998-12-05","1993-10-13","1993-11-13","1993-12-13","1994-01-13","1994-02-13","1994-03-13","1994-04-13","1994-05-13","1994-06-13","1994-07-13","1994-08-13","1994-09-13","1994-10-13","1994-11-13","1994-12-13","1995-01-13","1995-02-13","1995-03-13","1995-04-13","1995-05-13","1995-06-13","1995-07-13","1995-08-13","1995-09-13","1995-10-13","1995-11-13","1995-12-13","1996-01-13","1996-02-13","1996-03-13","1996-04-13","1996-05-13","1996-06-13","1996-07-13","1996-08-13","1996-09-13","1996-10-13","1996-11-13","1996-12-13","1997-01-13","1997-02-13","1997-03-13","1997-04-13","1997-05-13","1997-06-13","1997-07-13","1997-08-13","1997-09-13","1997-10-13","1997-11-13","1997-12-13","1998-01-13","1998-02-13","1998-03-13","1998-04-13","1998-05-13","1998-06-13","1998-07-13","1998-08-13","1998-09-13","1998-10-13","1998-11-13","1998-12-13","1993-10-10","1993-11-10","1993-12-10","1994-01-10","1994-02-10","1994-03-10","1994-04-10","1994-05-10","1994-06-10","1994-07-10","1994-08-10","1994-09-10","1994-10-10","1994-11-10","1994-12-10","1995-01-10","1995-02-10","1995-03-10","1995-04-10","1995-05-10","1995-06-10","1995-07-10","1995-08-10","1995-09-10","1995-10-10","1995-11-10","1995-12-10","1996-01-10","1996-02-10","1996-03-10","1996-04-10","1996-05-10","1996-06-10","1996-07-10","1996-08-10","1996-09-10","1996-10-10","1996-11-10","1996-12-10","1997-01-10","1997-02-10","1997-03-10","1997-04-10","1997-05-10","1997-06-10","1997-07-10","1997-08-10","1997-09-10","1997-10-10","1997-11-10","1997-12-10","1998-01-10","1998-02-10","1998-03-10","1998-04-10","1998-05-10","1998-06-10","1998-07-10","1998-08-10","1998-09-10","1998-10-10","1998-11-10","1998-12-10","1993-11-17","1993-10-16","1993-12-23","1994-04-23","1994-09-28","1995-08-18","1995-05-14","1996-02-24","1995-06-25","1995-01-21","1996-01-15","1998-01-28","1993-12-08","1994-12-10","1995-12-10","1998-12-23","1994-08-11","1994-01-09","1994-08-31","1994-09-10","1994-01-29","1995-06-22","1995-01-24","1995-08-31","1995-07-19","1996-04-17","1996-01-17","1996-06-25","1996-07-17","1997-11-17","1998-03-26","1993-09-30","1993-10-31","1993-11-30","1993-12-31","1994-01-31","1994-02-28","1994-03-31","1994-04-30","1994-05-31","1994-06-30","1994-07-31","1994-08-31","1994-09-30","1994-10-31","1994-11-30","1994-12-31","1995-01-31","1995-02-28","1995-03-31","1995-04-30","1995-05-31","1995-06-30","1995-07-31","1995-08-31","1995-09-30","1995-10-31","1995-11-30","1995-12-31","1996-01-31","1996-02-29","1996-03-31","1996-04-30","1996-05-31","1996-06-30","1996-07-31","1996-08-31","1996-09-30","1996-10-31","1996-11-30","1996-12-31","1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30","1993-07-11","1993-08-10","1993-09-09","1993-10-09","1993-11-08","1994-01-07","1994-02-06","1994-03-08","1994-04-07","1994-06-06","1994-07-06","1994-08-05","1994-09-04","1994-11-03","1994-12-03","1995-01-02","1995-02-01","1995-03-03","1995-04-02","1995-05-02","1995-06-01","1995-07-01","1995-07-31","1995-08-30","1995-09-29","1995-10-29","1995-11-28","1995-12-28","1996-01-27","1996-02-26","1996-03-27","1996-04-26","1996-05-26","1996-06-25","1996-07-25","1996-08-24","1996-09-23","1996-10-23","1996-11-22","1996-12-22","1997-01-21","1997-02-20","1997-04-21","1997-06-20","1997-07-20","1997-08-19","1997-09-18","1997-10-18","1997-11-17","1997-12-17","1998-02-15","1998-04-16","1998-05-16","1998-06-15","1998-07-15","1998-08-14","1998-11-12"],"y":[41273,26937,17628,17617,26065,26107,29276,22677,26070,33187,31559,17169,19395,27800,26259,33060,27475,28536,30611,31959,26544,19465,24426,19140,43169,29623,34808,38617,20604,19762,24672,36100,47156,16054,31826,15958,15081,13558,16409,25058,14856,14704,45286,19266,31160,22995,37917,22180,17904,14641,20564,17077,24767,34122,44804,20259,16706,24289,19458,11500,30253,43742,40380,39358,25022,21288,21277,24150,29767,27361,20762,29730,36847,29644,20829,23055,31460,29919,36720,25560,26621,28696,35619,24629,23125,28085,17225,25856,27708,27917,34539,18689,15684,20594,19187,19064,11976,14113,11467,11003,11643,14494,20980,19056,10213,27173,15188,32168,26895,20604,16967,13413,18441,14872,12586,22852,16509,27091,15768,14791,20211,19245,15100,25762,26129,35889,65796,39760,30166,38855,34587,45345,47299,25000,41908,58325,54482,32407,27133,35538,39397,40798,33298,34359,36434,39697,32367,27203,32163,24962,29934,34886,34395,42417,26567,23662,28672,23265,23142,20154,18191,15545,17981,18821,22172,28958,23134,14291,31251,22166,36246,30973,24682,21045,17491,22519,18950,16664,30030,20587,31169,19846,22969,28489,23323,19178,29840,46907,39967,38712,24376,16982,16971,23504,25461,26715,20116,25424,32541,28998,16523,18749,27154,25613,32414,24914,25975,28050,31313,23983,18819,23780,16579,25210,27062,27271,33893,18043,15038,19948,18541,18418,11330,13467,10821,10357,10997,13848,20334,14210,9567,26527,14542,31522,22349,19958,16321,12767,13995,14226,11940,22206,15863,26445,15122,14145,19565,18599,10854,25116,25483,35243,44933,30597,23203,23192,29724,31682,32936,26337,31645,38762,39719,30244,24970,33375,31834,38635,31135,32196,34271,37534,30204,25040,30000,22799,27771,32723,32232,36454,24404,17599,22509,21102,20979,13891,16028,13382,12918,16658,20009,22895,20971,12128,29088,17103,34083,28810,22519,18882,15328,20356,16787,14501,27867,18424,29006,17683,20806,22126,21160,17015,27677,44744,37804,30358,39864,39008,25161,22498,40356,42050,26108,29621,41473,35452,30299,25366,33997,29832,62781,35219,25355,37520,22744,34730,55121,39073,25375,33278,27807,28852,33056,31189,19254,31422,66209,40173,30579,39268,35000,45758,47712,25413,42321,58738,54895,51320,22746,40951,49410,58911,39411,47172,48247,50310,42380,29916,33476,33775,30347,35299,38808,42830,26980,24075,29085,23678,23555,20567,18604,19358,18394,19234,22585,29371,23547,19104,31664,22579,36659,31386,25095,21458,22304,22932,19363,20677,30443,21000,31582,23759,23382,28902,23736,19591,32953,47320,43980,42707,43470,43848,47096,32760,30455,31887,33845,35099,33808,40925,41882,32820,35951,39810,41211,33711,34772,36847,40110,32780,27616,32576,33556,30138,35069,38521,42509,26752,23908,28897,23507,23400,20356,18489,19226,18280,19116,22456,29186,23393,18969,22386,35060,24908,21317,24980,22826,22254,24464,20865,23604,23281,28783,23624,23158,28044],"mode":"lines","type":"scatter","name":"debit","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>fig2 &lt;- plot_ly(data, x = ~date, y = ~balance, color= ~method, type = &#39;scatter&#39;, mode = &#39;lines&#39;)

fig2 &lt;- fig2 %&gt;%  layout(title = &#39;Time Series Plot of Balance of Diff Methods&#39;, 
                       yaxis = list(title = &#39;Balance&#39;), 
                       xaxis = list(title = &#39;date&#39;))
                       
fig2</code></pre>
<div id="htmlwidget-b7e7c3570900b011772d" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-b7e7c3570900b011772d">{"x":{"visdat":{"1273845f81721":["function () ","plotlyVisDat"]},"cur_data":"1273845f81721","attrs":{"1273845f81721":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Time Series Plot of Balance of Diff Methods","yaxis":{"domain":[0,1],"automargin":true,"title":"Balance"},"xaxis":{"domain":[0,1],"automargin":true,"title":"date","type":"category","categoryorder":"array","categoryarray":["1993-09-30","1993-10-12","1993-10-13","1993-10-31","1993-11-12","1993-11-13","1993-11-30","1993-12-12","1993-12-13","1993-12-31","1994-01-12","1994-01-13","1994-01-31","1994-02-12","1994-02-13","1994-02-28","1994-03-12","1994-03-13","1994-03-31","1994-04-12","1994-04-13","1994-04-30","1994-05-12","1994-05-13","1994-05-31","1994-06-12","1994-06-13","1994-06-30","1994-07-12","1994-07-13","1994-07-31","1994-08-12","1994-08-13","1994-08-31","1994-09-12","1994-09-13","1994-09-30","1994-10-12","1994-10-13","1994-10-31","1994-11-12","1994-11-13","1994-11-30","1994-12-12","1994-12-13","1994-12-31","1995-01-12","1995-01-13","1995-01-31","1995-02-12","1995-02-13","1995-02-28","1995-03-12","1995-03-13","1995-03-31","1995-04-12","1995-04-13","1995-04-30","1995-05-12","1995-05-13","1995-05-31","1995-06-12","1995-06-13","1995-06-30","1995-07-12","1995-07-13","1995-07-31","1995-08-12","1995-08-13","1995-08-31","1995-09-12","1995-09-13","1995-09-30","1995-10-12","1995-10-13","1995-10-31","1995-11-12","1995-11-13","1995-11-30","1995-12-12","1995-12-13","1995-12-31","1996-01-12","1996-01-13","1996-01-31","1996-02-12","1996-02-13","1996-02-29","1996-03-12","1996-03-13","1996-03-31","1996-04-12","1996-04-13","1996-04-30","1996-05-12","1996-05-13","1996-05-31","1996-06-12","1996-06-13","1996-06-30","1996-07-12","1996-07-13","1996-07-31","1996-08-12","1996-08-13","1996-08-31","1996-09-12","1996-09-13","1996-09-30","1996-10-12","1996-10-13","1996-10-31","1996-11-12","1996-11-13","1996-11-30","1996-12-12","1996-12-13","1996-12-31","1997-01-12","1997-01-13","1997-01-31","1997-02-12","1997-02-13","1997-02-28","1997-03-12","1997-03-13","1997-03-31","1997-04-12","1997-04-13","1997-04-30","1997-05-12","1997-05-13","1997-05-31","1997-06-12","1997-06-13","1997-06-30","1997-07-12","1997-07-13","1997-07-31","1997-08-12","1997-08-13","1997-08-31","1997-09-12","1997-09-13","1997-09-30","1997-10-12","1997-10-13","1997-10-31","1997-11-12","1997-11-13","1997-11-30","1997-12-12","1997-12-13","1997-12-31","1998-01-12","1998-01-13","1998-01-31","1998-02-12","1998-02-13","1998-02-28","1998-03-12","1998-03-13","1998-03-31","1998-04-12","1998-04-13","1998-04-30","1998-05-12","1998-05-13","1998-05-31","1998-06-12","1998-06-13","1998-06-30","1998-07-12","1998-07-13","1998-07-31","1998-08-12","1998-08-13","1998-08-31","1998-09-12","1998-09-13","1998-09-30","1998-10-12","1998-10-13","1998-10-31","1998-11-12","1998-11-13","1998-11-30","1998-12-12","1998-12-13"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["1993-10-12","1993-11-12","1993-12-12","1994-01-12","1994-02-12","1994-03-12","1994-04-12","1994-05-12","1994-06-12","1994-07-12","1994-08-12","1994-09-12","1994-10-12","1994-11-12","1994-12-12","1995-01-12","1995-02-12","1995-03-12","1995-04-12","1995-05-12","1995-06-12","1995-07-12","1995-08-12","1995-09-12","1993-10-12","1993-11-12","1993-12-12","1994-01-12","1994-02-12","1994-03-12","1994-04-12","1994-05-12","1994-06-12","1994-07-12","1994-08-12","1994-09-12","1994-10-12","1994-11-12","1994-12-12","1995-01-12","1995-02-12","1995-03-12","1995-04-12","1995-05-12","1995-06-12","1995-07-12","1995-08-12","1995-09-12","1995-10-12","1995-11-12","1995-12-12","1996-01-12","1996-02-12","1996-03-12","1996-04-12","1996-05-12","1996-06-12","1996-07-12","1996-08-12","1996-09-12","1996-10-12","1996-11-12","1996-12-12","1997-01-12","1997-02-12","1997-03-12","1997-04-12","1997-05-12","1997-06-12","1997-07-12","1997-08-12","1997-09-12","1997-10-12","1997-11-12","1997-12-12","1998-01-12","1998-02-12","1998-03-12","1998-04-12","1998-05-12","1998-06-12","1998-07-12","1998-08-12","1998-09-12","1998-10-12","1998-11-12","1998-12-12","1993-10-13","1993-11-13","1993-12-13","1994-01-13","1994-02-13","1994-03-13","1994-04-13","1994-05-13","1994-06-13","1994-07-13","1994-08-13","1994-09-13","1994-10-13","1994-11-13","1994-12-13","1995-01-13","1995-02-13","1995-03-13","1995-04-13","1995-05-13","1995-06-13","1995-07-13","1995-08-13","1995-09-13","1995-10-13","1995-11-13","1995-12-13","1996-01-13","1996-02-13","1996-03-13","1996-04-13","1996-05-13","1996-06-13","1996-07-13","1996-08-13","1996-09-13","1996-10-13","1996-11-13","1996-12-13","1997-01-13","1997-02-13","1997-03-13","1997-04-13","1997-05-13","1997-06-13","1997-07-13","1997-08-13","1997-09-13","1997-10-13","1997-11-13","1997-12-13","1998-01-13","1998-02-13","1998-03-13","1998-04-13","1998-05-13","1998-06-13","1998-07-13","1998-08-13","1998-09-13","1998-10-13","1998-11-13","1998-12-13"],"y":[41273,26937,17628,17617,26065,26107,29276,22677,26070,33187,31559,17169,19395,27800,26259,33060,27475,28536,30611,31959,26544,19465,24426,19140,39358,25022,21288,21277,24150,29767,27361,20762,29730,36847,29644,20829,23055,31460,29919,36720,25560,26621,28696,35619,24629,23125,28085,17225,25856,27708,27917,34539,18689,15684,20594,19187,19064,11976,14113,11467,11003,11643,14494,20980,19056,10213,27173,15188,32168,26895,20604,16967,13413,18441,14872,12586,22852,16509,27091,15768,14791,20211,19245,15100,25762,26129,35889,38712,24376,16982,16971,23504,25461,26715,20116,25424,32541,28998,16523,18749,27154,25613,32414,24914,25975,28050,31313,23983,18819,23780,16579,25210,27062,27271,33893,18043,15038,19948,18541,18418,11330,13467,10821,10357,10997,13848,20334,14210,9567,26527,14542,31522,22349,19958,16321,12767,13995,14226,11940,22206,15863,26445,15122,14145,19565,18599,10854,25116,25483,35243],"mode":"lines","type":"scatter","name":"bank transfer","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1993-09-30","1993-10-31","1993-11-30","1993-12-31","1994-01-31","1994-02-28","1994-03-31","1994-04-30","1994-05-31","1994-06-30","1994-07-31","1994-08-31","1994-09-30","1994-10-31","1994-11-30","1994-12-31","1995-01-31","1995-02-28","1995-03-31","1995-04-30","1995-05-31","1995-06-30","1995-07-31","1995-08-31","1995-09-30","1995-10-31","1995-11-30","1995-12-31","1996-01-31","1996-02-29","1996-03-31","1996-04-30","1996-05-31","1996-06-30","1996-07-31","1996-08-31","1996-09-30","1996-10-31","1996-11-30","1996-12-31","1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30"],"y":[66209,40173,30579,39268,35000,45758,47712,25413,42321,58738,54895,51320,22746,40951,49410,58911,39411,47172,48247,50310,42380,29916,33476,33775,30347,35299,38808,42830,26980,24075,29085,23678,23555,20567,18604,19358,18394,19234,22585,29371,23547,19104,31664,22579,36659,31386,25095,21458,22304,22932,19363,20677,30443,21000,31582,23759,23382,28902,23736,19591,32953,47320,43980],"mode":"lines","type":"scatter","name":"cash","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>fig3 &lt;- plot_ly(data, x = ~date, y = ~balance, color= ~category, type = &#39;scatter&#39;, mode = &#39;lines&#39;)

fig3 &lt;- fig3 %&gt;%  layout(title = &#39;Time Series Plot of Balance of Diff Category&#39;, 
                       yaxis = list(title = &#39;Balance&#39;), 
                       xaxis = list(title = &#39;date&#39;))
                       
fig3</code></pre>
<div id="htmlwidget-526842df17c18d6099ac" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-526842df17c18d6099ac">{"x":{"visdat":{"127382955df4":["function () ","plotlyVisDat"]},"cur_data":"127382955df4","attrs":{"127382955df4":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Time Series Plot of Balance of Diff Category","yaxis":{"domain":[0,1],"automargin":true,"title":"Balance"},"xaxis":{"domain":[0,1],"automargin":true,"title":"date","type":"category","categoryorder":"array","categoryarray":["1993-09-30","1993-10-12","1993-10-13","1993-10-31","1993-11-12","1993-11-13","1993-11-30","1993-12-12","1993-12-13","1993-12-31","1994-01-12","1994-01-13","1994-01-31","1994-02-12","1994-02-13","1994-02-28","1994-03-12","1994-03-13","1994-03-31","1994-04-12","1994-04-13","1994-04-30","1994-05-12","1994-05-13","1994-05-31","1994-06-12","1994-06-13","1994-06-30","1994-07-12","1994-07-13","1994-07-31","1994-08-12","1994-08-13","1994-08-31","1994-09-12","1994-09-13","1994-09-30","1994-10-12","1994-10-13","1994-10-31","1994-11-12","1994-11-13","1994-11-30","1994-12-12","1994-12-13","1994-12-31","1995-01-12","1995-01-13","1995-01-31","1995-02-12","1995-02-13","1995-02-28","1995-03-12","1995-03-13","1995-03-31","1995-04-12","1995-04-13","1995-04-30","1995-05-12","1995-05-13","1995-05-31","1995-06-12","1995-06-13","1995-06-30","1995-07-12","1995-07-13","1995-07-31","1995-08-12","1995-08-13","1995-08-31","1995-09-12","1995-09-13","1995-09-30","1995-10-12","1995-10-13","1995-10-31","1995-11-12","1995-11-13","1995-11-30","1995-12-12","1995-12-13","1995-12-31","1996-01-12","1996-01-13","1996-01-31","1996-02-12","1996-02-13","1996-02-29","1996-03-12","1996-03-13","1996-03-31","1996-04-12","1996-04-13","1996-04-30","1996-05-12","1996-05-13","1996-05-31","1996-06-12","1996-06-13","1996-06-30","1996-07-12","1996-07-13","1996-07-31","1996-08-12","1996-08-13","1996-08-31","1996-09-12","1996-09-13","1996-09-30","1996-10-12","1996-10-13","1996-10-31","1996-11-12","1996-11-13","1996-11-30","1996-12-12","1996-12-13","1996-12-31","1997-01-12","1997-01-13","1997-01-31","1997-02-12","1997-02-13","1997-02-28","1997-03-12","1997-03-13","1997-03-31","1997-04-12","1997-04-13","1997-04-30","1997-05-12","1997-05-13","1997-05-31","1997-06-12","1997-06-13","1997-06-30","1997-07-12","1997-07-13","1997-07-31","1997-08-12","1997-08-13","1997-08-31","1997-09-12","1997-09-13","1997-09-30","1997-10-12","1997-10-13","1997-10-31","1997-11-12","1997-11-13","1997-11-30","1997-12-12","1997-12-13","1997-12-31","1998-01-12","1998-01-13","1998-01-31","1998-02-12","1998-02-13","1998-02-28","1998-03-12","1998-03-13","1998-03-31","1998-04-12","1998-04-13","1998-04-30","1998-05-12","1998-05-13","1998-05-31","1998-06-12","1998-06-13","1998-06-30","1998-07-12","1998-07-13","1998-07-31","1998-08-12","1998-08-13","1998-08-31","1998-09-12","1998-09-13","1998-09-30","1998-10-12","1998-10-13","1998-10-31","1998-11-12","1998-11-13","1998-11-30","1998-12-12","1998-12-13"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["1993-10-12","1993-11-12","1993-12-12","1994-01-12","1994-02-12","1994-03-12","1994-04-12","1994-05-12","1994-06-12","1994-07-12","1994-08-12","1994-09-12","1994-10-12","1994-11-12","1994-12-12","1995-01-12","1995-02-12","1995-03-12","1995-04-12","1995-05-12","1995-06-12","1995-07-12","1995-08-12","1995-09-12","1995-10-12","1995-11-12","1995-12-12","1996-01-12","1996-02-12","1996-03-12","1996-04-12","1996-05-12","1996-06-12","1996-07-12","1996-08-12","1996-09-12","1996-10-12","1996-11-12","1996-12-12","1997-01-12","1997-02-12","1997-03-12","1997-04-12","1997-05-12","1997-06-12","1997-07-12","1997-08-12","1997-09-12","1997-10-12","1997-11-12","1997-12-12","1998-01-12","1998-02-12","1998-03-12","1998-04-12","1998-05-12","1998-06-12","1998-07-12","1998-08-12","1998-09-12","1998-10-12","1998-11-12","1998-12-12"],"y":[39358,25022,21288,21277,24150,29767,27361,20762,29730,36847,29644,20829,23055,31460,29919,36720,25560,26621,28696,35619,24629,23125,28085,17225,25856,27708,27917,34539,18689,15684,20594,19187,19064,11976,14113,11467,11003,11643,14494,20980,19056,10213,27173,15188,32168,26895,20604,16967,13413,18441,14872,12586,22852,16509,27091,15768,14791,20211,19245,15100,25762,26129,35889],"mode":"lines","type":"scatter","name":"household payment","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1993-10-13","1993-11-13","1993-12-13","1994-01-13","1994-02-13","1994-03-13","1994-04-13","1994-05-13","1994-06-13","1994-07-13","1994-08-13","1994-09-13","1994-10-13","1994-11-13","1994-12-13","1995-01-13","1995-02-13","1995-03-13","1995-04-13","1995-05-13","1995-06-13","1995-07-13","1995-08-13","1995-09-13","1995-10-13","1995-11-13","1995-12-13","1996-01-13","1996-02-13","1996-03-13","1996-04-13","1996-05-13","1996-06-13","1996-07-13","1996-08-13","1996-09-13","1996-10-13","1996-11-13","1996-12-13","1997-01-13","1997-02-13","1997-03-13","1997-04-13","1997-05-13","1997-06-13","1997-07-13","1997-08-13","1997-09-13","1997-10-13","1997-11-13","1997-12-13","1998-01-13","1998-02-13","1998-03-13","1998-04-13","1998-05-13","1998-06-13","1998-07-13","1998-08-13","1998-09-13","1998-10-13","1998-11-13","1998-12-13"],"y":[38712,24376,16982,16971,23504,25461,26715,20116,25424,32541,28998,16523,18749,27154,25613,32414,24914,25975,28050,31313,23983,18819,23780,16579,25210,27062,27271,33893,18043,15038,19948,18541,18418,11330,13467,10821,10357,10997,13848,20334,14210,9567,26527,14542,31522,22349,19958,16321,12767,13995,14226,11940,22206,15863,26445,15122,14145,19565,18599,10854,25116,25483,35243],"mode":"lines","type":"scatter","name":"insurance payment","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1993-10-12","1993-11-12","1993-12-12","1994-01-12","1994-02-12","1994-03-12","1994-04-12","1994-05-12","1994-06-12","1994-07-12","1994-08-12","1994-09-12","1994-10-12","1994-11-12","1994-12-12","1995-01-12","1995-02-12","1995-03-12","1995-04-12","1995-05-12","1995-06-12","1995-07-12","1995-08-12","1995-09-12"],"y":[41273,26937,17628,17617,26065,26107,29276,22677,26070,33187,31559,17169,19395,27800,26259,33060,27475,28536,30611,31959,26544,19465,24426,19140],"mode":"lines","type":"scatter","name":"loan payment","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1993-09-30","1993-10-31","1993-11-30","1993-12-31","1994-01-31","1994-02-28","1994-03-31","1994-04-30","1994-05-31","1994-06-30","1994-07-31","1994-08-31","1994-09-30","1994-10-31","1994-11-30","1994-12-31","1995-01-31","1995-02-28","1995-03-31","1995-04-30","1995-05-31","1995-06-30","1995-07-31","1995-08-31","1995-09-30","1995-10-31","1995-11-30","1995-12-31","1996-01-31","1996-02-29","1996-03-31","1996-04-30","1996-05-31","1996-06-30","1996-07-31","1996-08-31","1996-09-30","1996-10-31","1996-11-30","1996-12-31","1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30"],"y":[66209,40173,30579,39268,35000,45758,47712,25413,42321,58738,54895,51320,22746,40951,49410,58911,39411,47172,48247,50310,42380,29916,33476,33775,30347,35299,38808,42830,26980,24075,29085,23678,23555,20567,18604,19358,18394,19234,22585,29371,23547,19104,31664,22579,36659,31386,25095,21458,22304,22932,19363,20677,30443,21000,31582,23759,23382,28902,23736,19591,32953,47320,43980],"mode":"lines","type":"scatter","name":"statement charge","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="task5" class="section level3">
<h3>Task5</h3>
<p>Explore the validity of the data for the case whether or not an account has a credit card and whether or not they have associated credit card transactions. Is there anything worth noting?</p>
<pre class="r"><code>library(ggplot2)
# load data sets
acct = read.csv(&#39;data/accounts_analytical.csv&#39;, header = TRUE)
tran = read.csv(&#39;data/transactions.csv&#39;, header = TRUE)</code></pre>
<pre class="r"><code># list of account ids which have credit card transactions
list_id &lt;- c(tran$account_id[tran$method == &#39;credit card&#39;])
list_id &lt;- unique(list_id)
length(list_id)</code></pre>
<pre><code>## [1] 807</code></pre>
<pre class="r"><code># list of account ids which have at least one credit card
list_ID &lt;- c(acct$account_id[acct$credit_cards &gt;= 1])
list_ID &lt;- unique(list_ID)
length(list_ID)</code></pre>
<pre><code>## [1] 726</code></pre>
<pre class="r"><code># common - list of account id which has at least one credit card and also does credit card transaction.
common = intersect(list_id, list_ID)
length(common)</code></pre>
<pre><code>## [1] 139</code></pre>
<pre class="r"><code>x &lt;- c(&#39;Num_id_cc_trans&#39;, &#39;Num_id_cc&#39;, &#39;Num_cmn_od&#39;)
y &lt;- c(807, 726, 139)
data &lt;- data.frame(x,y)
barplot(data$y,
        main = &#39;Barplot of Account Count&#39;,
        xlab = &#39;class&#39;,
        ylab = &#39;count&#39;,
        ylim = c(0,1000), 
        names.arg = c(&#39;Num_id_tran&#39;, &#39;Num_id_cc&#39;, &#39;Num_cmn_id&#39;),
        col = c(&#39;yellow&#39;,&#39;blue&#39;, &#39;green&#39;))
text(0.7, 840, &quot;807&quot;)
text(1.9, 766, &quot;720&quot;)
text(3.1, 168, &#39;139&#39;)</code></pre>
<p><img src="BankAnalysis_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p>There are 139 accounts which have credit cards and also have credit cards transactions.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
